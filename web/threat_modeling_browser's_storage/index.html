<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-web/threat_modeling_browser's_storage" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Threat Modeling Browser’s Storage | seku&#x27;s blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://sureshpantha.com.np/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://sureshpantha.com.np/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://sureshpantha.com.np/web/threat_modeling_browser&#x27;s_storage"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Threat Modeling Browser’s Storage | seku&#x27;s blog"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://sureshpantha.com.np/web/threat_modeling_browser&#x27;s_storage"><link data-rh="true" rel="alternate" href="https://sureshpantha.com.np/web/threat_modeling_browser&#x27;s_storage" hreflang="en"><link data-rh="true" rel="alternate" href="https://sureshpantha.com.np/web/threat_modeling_browser&#x27;s_storage" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.76671e14.css">
  <script>
    window.onload = function() {
      // Find the SVG element by its class name
      const svgButton = document.querySelector('.expandButtonIcon_i1dp');
      if (svgButton) {
        // Simulate a click event
        svgButton.click();
      }
    };
  </script>
<script src="/assets/js/runtime~main.6f1ead4f.js" defer="defer"></script>
<script src="/assets/js/main.2fa5b5a5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="owl" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="owl" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">seku&#x27;s blog</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">seku&#x27;s blog : Insights from an AppSec Engineer</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/web/threat_modeling_browser&#x27;s_storage">web</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/web/threat_modeling_browser&#x27;s_storage">tra_browser&#x27;s_storage</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">web</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">tra_browser&#x27;s_storage</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Threat Modeling Browser’s Storage</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>In the early days of the World Wide Web, websites were primarily static. The server responded with the same static file (say <code>home.html</code> for the home page) without any user-specific personalization on every request. Every visitor to any web application receives identical content from the server. As web applications evolved, the need to have personalized content tailored to each user became a necessity. Websites needed to store data and generate customized content in real time based on user interaction, specific requests, and/or backend processes. This required the servers to store user information and verify the user&#x27;s identity when serving the requests. As HTTP is a stateless protocol, web applications require a way to store user-identifying information on the client side, which could be sent with every request. <a href="https://hiddenheroes.netguru.com/lou-montulli" target="_blank" rel="noopener noreferrer">Thus, the cookie was born</a>.</p>
<p>The predominant architecture that emerged from all this involves server-side storage of user data, with browsers maintaining session information to identify logged-in users and facilitate personalized content delivery.</p>
<p><img decoding="async" loading="lazy" alt="cookie" src="/assets/images/pa-f566e0d79d94488408384061421b484a.png" width="853" height="344" class="img_ev3q"></p>
<p>Web applications have become integral to our lives as the internet has grown. Everything is moving to the web, and web applications are becoming sophisticated and feature-rich. The data the server needs to send on each request is growing exponentially. If data is only stored on the server and transmitted on each request, the load times for each website would be very high. Storing some of the information from previous requests on the client end significantly increases the response times, removes the burden on the server to serve huge amounts of data in each request, and allows the javascript running on the browser to give unique user experiences.
Today, web applications store significant information on the client side in the browsers.</p>
<p><img decoding="async" loading="lazy" alt="pa_user" src="/assets/images/pa_user-da6d1cba2ba15ba34409c709a9c1e352.png" width="964" height="339" class="img_ev3q"></p>
<p>As more websites are being built to store significant data on the client side, it is becoming a prime target for attackers. As there are multiple ways of storing this data on the browser, each coming with its own advantages and disadvantages, it becomes essential for development teams to learn about the risks associated with each form of storage and ensure safeguards are in place to address the issue.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="access-to-client-side-storage">Access to Client-Side Storage<a href="#access-to-client-side-storage" class="hash-link" aria-label="Direct link to Access to Client-Side Storage" title="Direct link to Access to Client-Side Storage">​</a></h2>
<p>Like any other program in your operating system, browsers run as a process. When it&#x27;s running, this process gets its own set of memory. In multithreaded systems, this process can spawn o
processes, which are child-to-parent processes. In most modern browsers, a site is run as an isolated child process that has only access to its data in the memory.  A process can write to disk and fetch from it. Most modern operating systems have discretionary access control, meaning access to data is based on the user&#x27;s identity. This means that anything stored on the client side by any web application is stored within files that high-privileged users can access, say, Administrators and root users (and malware that has gained permission from said high-privileged users). For example, Mozilla stores all of its cookies inside a file called cookies.sqlite, which resides within <a href="https://stackoverflow.com/questions/7610896/how-do-i-use-sqlite-to-read-data-from-the-firefox-cookies-file" target="_blank" rel="noopener noreferrer">Mozilla&#x27;s profile directory</a>. It takes a simple SQLite3 reader to parse the file and <a href="https://www.blackhillsinfosec.com/your-browser-is-not-a-safe-space/" target="_blank" rel="noopener noreferrer">extract sensitive information</a>.</p>
<p>The Same-origin Policy governs access to client-side information for the sites rendered in a browser. A document&#x27;s origin is a unique identifier that combines protocol (https://), domain (<a href="http://example.com/" target="_blank" rel="noopener noreferrer">example.com</a>), and port number (443).</p>
<p>The same-origin policy states <a href="https://en.wikipedia.org/wiki/Same-origin_policy" target="_blank" rel="noopener noreferrer">that a web browser permits scripts contained in a first web page to access data on a second web page, but only if both web pages have the same <em>origin</em></a>.</p>
<p>Two URLs have the <em>same origin</em> if the</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Protocol" target="_blank" rel="noopener noreferrer">protocol</a>,</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Port" target="_blank" rel="noopener noreferrer">port</a> (if specified), and</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Host" target="_blank" rel="noopener noreferrer">Host</a> is the same for both URLs.</li>
</ul>
<p>Websites with the same scheme, hostname, and port combination are considered &quot;same-origin.&quot;</p>
<p>Here&#x27;s a table illustrating Same-Origin Policy scenarios using <em><strong>sureshpantha.com.np</strong></em> as the base origin:</p>
<table><thead><tr><th>Origin</th><th>Same/Different</th><th>Reason</th></tr></thead><tbody><tr><td><a href="https://sureshpantha.com.np" target="_blank" rel="noopener noreferrer">https://sureshpantha.com.np</a></td><td>Same Origin</td><td>Identical protocol, hostname, port</td></tr><tr><td><a href="http://sureshpantha.com.np" target="_blank" rel="noopener noreferrer">http://sureshpantha.com.np</a></td><td>Different Origin</td><td>Different protocol (http vs https)</td></tr><tr><td><a href="https://www.sureshpantha.com.np" target="_blank" rel="noopener noreferrer">https://www.sureshpantha.com.np</a></td><td>Different Origin</td><td>Different subdomain</td></tr><tr><td><a href="https://sureshpantha.com.np:8080" target="_blank" rel="noopener noreferrer">https://sureshpantha.com.np:8080</a></td><td>Different Origin</td><td>Different port</td></tr><tr><td><a href="https://example.com" target="_blank" rel="noopener noreferrer">https://example.com</a></td><td>Different Origin</td><td>Different hostname</td></tr><tr><td><a href="https://sureshpantha.com.np/page" target="_blank" rel="noopener noreferrer">https://sureshpantha.com.np/page</a></td><td>Same Origin</td><td>Path doesn&#x27;t affect origin</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="client-side-storage">Client-Side Storage<a href="#client-side-storage" class="hash-link" aria-label="Direct link to Client-Side Storage" title="Direct link to Client-Side Storage">​</a></h2>
<p>Browsers store information about users, sessions, or site preferences directly on the client device, which is client-side storage. By storing data on the client side, developers can significantly reduce load times and make websites more responsive and reliable. Storing sensitive data on the client side opens it up to attacks and can lead to significant exposure. Understanding how data is stored and accessed helps web developers decide where to store data safely.</p>
<p>In modern web applications, we can store data in the client&#x27;s browser in one of the following ways:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies" target="_blank" rel="noopener noreferrer"><strong>Cookies</strong></a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API" target="_blank" rel="noopener noreferrer"><strong>Web Storage API</strong></a>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" target="_blank" rel="noopener noreferrer"><strong>Local Storage</strong></a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage" target="_blank" rel="noopener noreferrer"><strong>Session Storage</strong></a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cookies">Cookies<a href="#cookies" class="hash-link" aria-label="Direct link to Cookies" title="Direct link to Cookies">​</a></h3>
<p>HTTP cookies are data stored in the client’s device, which enables websites to track sessions, remember user preferences, and personalize web experiences. A cookie is transmitted through the <code>Cookie</code> Header after being set by the server using the <code>Set-Cookie</code> response header.</p>
<p><img decoding="async" loading="lazy" alt="cookie" src="/assets/images/cookie-50d8cde6c5976522e8fccac18372ef7c.png" width="1050" height="562" class="img_ev3q"></p>
<p>Along with the key-value pair, the server can set an expiry date after which the cookie expires. If no date is set, session cookies (without an expiration date) expire when the browser is closed. Persistent cookies without an explicit expiry date typically default to not being set, which means they won&#x27;t be automatically stored or transmitted after the current browsing session ends.
The cookies set for a site are sent to the server for every subsequent request.</p>
<p><img decoding="async" loading="lazy" alt="cookie-send" src="/assets/images/cookie-send-9c9105eb7e989bbf8a78d272ee3075ab.png" width="1071" height="569" class="img_ev3q"></p>
<table><thead><tr><th><strong>Attribute</strong></th><th><strong>Details</strong></th></tr></thead><tbody><tr><td><strong>Use Case</strong></td><td>Small Pieces of information about user preferences, user tracking, session management, and remembering stateful information</td></tr><tr><td><strong>Expiration</strong></td><td>Session-based (deleted when session is closed ), can be made persistent by setting up expiry date</td></tr><tr><td><strong>Data Capacity</strong></td><td>4 KB per cookie. Each browser has a threshold for <a href="http://browsercookielimits.iain.guru/" target="_blank" rel="noopener noreferrer">how many cookies are allowed per site</a>.</td></tr><tr><td><strong>Constraints</strong></td><td>- Cookies are sent with every request to the server- Access to cookies are subject to security policies and same-origin restrictions</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="who-can-access-cookies-associated-with-a-domain">Who can access cookies associated with a domain?<a href="#who-can-access-cookies-associated-with-a-domain" class="hash-link" aria-label="Direct link to Who can access cookies associated with a domain?" title="Direct link to Who can access cookies associated with a domain?">​</a></h4>
<p>In terms of access to the data stored inside the cookies,</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="same-origin-access">Same-Origin Access<a href="#same-origin-access" class="hash-link" aria-label="Direct link to Same-Origin Access" title="Direct link to Same-Origin Access">​</a></h5>
<p>A cookie set by <code>example.com</code> can be accessed by any JavaScript running on any page from the same origin by default. We can also explicitly specify which subpages have access to the cookie using the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent" target="_blank" rel="noopener noreferrer">Path attribute</a>.</p>
<blockquote>
<p>The <code>Path</code> attribute indicates a URL path that must exist in the requested URL in order to send the <code>Cookie</code> header.</p>
</blockquote>
<p>Cookies can be accessed by subdomains if the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#define_where_cookies_are_sent" target="_blank" rel="noopener noreferrer">Domain attribute</a> is set while the cookie is being set.</p>
<blockquote>
<p>The <code>Domain</code> attribute specifies which server can receive a cookie. If specified, cookies are available on the specified server and its subdomains. For example, if you set <code>Domain=mozilla.org</code> from <code>mozilla.org</code>, cookies are available on that domain and subdomains like <code>developer.mozilla.org</code>.</p>
</blockquote>
<p>Access to cookie data by Javascript can be completely <a href="https://portswigger.net/web-security/csrf/bypassing-samesite-restrictions" target="_blank" rel="noopener noreferrer">almost</a> restricted by using the <code>HttpOnly</code> flag. This ensures that the cookie is safe from XXS vulnerabilities present in the page.</p>
<blockquote>
<p>A cookie with the <code>HttpOnly</code> attribute can&#x27;t be accessed by JavaScript, for example using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie" target="_blank" rel="noopener noreferrer"><code>Document.cookie</code></a>; it can only be accessed when it reaches the server. Cookies that persist user sessions for example should have the <code>HttpOnly</code> attribute set — it would be really insecure to make them available to JavaScript. This precaution helps mitigate cross-site scripting (<a href="https://developer.mozilla.org/en-US/docs/Web/Security/Types_of_attacks#cross-site_scripting_xss" target="_blank" rel="noopener noreferrer">XSS</a>) attacks.</p>
</blockquote>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="browser-access">Browser Access<a href="#browser-access" class="hash-link" aria-label="Direct link to Browser Access" title="Direct link to Browser Access">​</a></h5>
<ul>
<li>Users can view and delete cookies through browser settings/dev tools.</li>
<li>Browser extensions with appropriate permissions can access cookies.</li>
<li>The browser itself manages and enforces cookie access controls.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="server-side-access">Server-Side Access<a href="#server-side-access" class="hash-link" aria-label="Direct link to Server-Side Access" title="Direct link to Server-Side Access">​</a></h5>
<ul>
<li>The web server of the domain that sets the cookie receives cookies in HTTP requests</li>
<li>Back-end services of that domain can process cookie data</li>
<li>Load balancers/proxies in front of the server may also see cookies</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="security-considerations">Security Considerations<a href="#security-considerations" class="hash-link" aria-label="Direct link to Security Considerations" title="Direct link to Security Considerations">​</a></h4>
<ul>
<li>Cookies are protected using the same origin policy, where data stored is scoped to the document’s origin, meaning the webpage can only access data if it has the same origin by default.</li>
<li>This means that if an attacker can inject JavaScript into a webpage (XSS), that attacker-controlled JavaScript can access all stored cookies in the client’s browser.</li>
<li>As cookies have to be sent with each request, they can be stolen if an attacker gets access to these requests eg . Load balancers/proxies</li>
<li>Several attributes have been introduced which can be sent with the Set-Cookie header to ensure the browser handles cookies in a certain way;<!-- -->
<ul>
<li>
<p><code>Secure</code> attribute instructs the browser to only send the cookie over encrypted HTTPS connections.</p>
</li>
<li>
<p>Cookies with <code>HTTPOnly</code> attribute are not accessible from Javascript and, therefore, unaffected by cross-site scripting (XSS) attacks.</p>
</li>
<li>
<p>Cookies&#x27; <code>Path</code> and <code>Domain</code> attributes precisely control cookie accessibility across web applications.</p>
<ul>
<li>
<p>The <code>Path</code> attribute restricts a cookie to specific server routes—for instance, setting <code>Path=/admin</code> ensures a cookie is only accessible within administrative sections, preventing other application segments from reading it.</p>
</li>
<li>
<p>Similarly, the <code>Domain</code> attribute allows cookie sharing across subdomains; using <code>Domain=.example.com</code> enables a single cookie to be valid for <code>blog.example.com</code>, <code>store.example.com</code>, and <code>www.example.com</code>, facilitating unified authentication and tracking across different service endpoints while maintaining security boundaries.</p>
</li>
</ul>
</li>
<li>
<p>The SameSite cookie attribute controls how cookies are handled in cross-site requests, helping protect against Cross-Site Request Forgery (CSRF) attacks. It offers three settings:</p>
<ul>
<li>Strict (most secure, only sends cookies in first-party context),</li>
<li>Lax (default, allows cookies in top-level navigations), and</li>
<li>None (allows cross-site cookie transmission, requires Secure flag).</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="web-storage-api"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API" target="_blank" rel="noopener noreferrer">Web Storage API</a><a href="#web-storage-api" class="hash-link" aria-label="Direct link to web-storage-api" title="Direct link to web-storage-api">​</a></h3>
<p>Web storage API provides a mechanism to store key-value pairs in the browser. It is generally divided into Local Storage and Session Storage.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="local-storage"><strong>Local Storage</strong><a href="#local-storage" class="hash-link" aria-label="Direct link to local-storage" title="Direct link to local-storage">​</a></h5>
<p>Local storage is a feature in web browsers that lets web developers save data in users&#x27; browsers. It is part of the Web Storage API along with Session Storage. When users request a webpage, the server sends data and the Javascript code to save in the browser — local Storage stores data as key-value pairs. Data saved through local storage persists on the browser when the page is closed or refreshed. Data in localStorage is saved using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/setItem" target="_blank" rel="noopener noreferrer">localStorage.setItem()</a> method.</p>
<p><img decoding="async" loading="lazy" alt="localset" src="/assets/images/localset-c5598032992f8e722089f38e6b8b21bf.png" width="1208" height="758" class="img_ev3q"></p>
<p>The stored data can be retrieved by the javascript running on the browser with it&#x27;s key by using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/getItem" target="_blank" rel="noopener noreferrer">localStorage.getItem(&quot;key&quot;)</a></p>
<p><img decoding="async" loading="lazy" alt="localget" src="/assets/images/localget-ebd5e66e053b0523078b8708659a1e4b.png" width="2000" height="654" class="img_ev3q"></p>
<p>Once stored in Local Storage, data must be cleared explicitly ( using methods like <a href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/removeItem" target="_blank" rel="noopener noreferrer">removeItem()</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Storage/clear" target="_blank" rel="noopener noreferrer">clear()</a> ); i.e., it remains unless explicitly cleared. Data stored in Local Storage is scoped to the document&#x27;s origin.</p>
<table><thead><tr><th><strong>Attribute</strong></th><th><strong>Details</strong></th></tr></thead><tbody><tr><td><strong>Use Case</strong></td><td>Storing larger amounts of data client-side, web app configurations, non-sensitive user preferences, offline data, cached assets</td></tr><tr><td><strong>Expiration</strong></td><td>Persistent until explicitly cleared by code or user. Survives browser restarts and OS reboots</td></tr><tr><td><strong>Data Capacity</strong></td><td>~ 5-10 MB (varies by browser). Significantly larger than cookies</td></tr><tr><td><strong>Constraints</strong></td><td>- JavaScript access only (no server access)- Same-origin policy applies- Synchronous operations can block main thread</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="who-can-access-local-storage-associated-with-a-domain">Who can access Local Storage associated with a domain?<a href="#who-can-access-local-storage-associated-with-a-domain" class="hash-link" aria-label="Direct link to Who can access Local Storage associated with a domain?" title="Direct link to Who can access Local Storage associated with a domain?">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="same-origin-access-1">Same-Origin Access<a href="#same-origin-access-1" class="hash-link" aria-label="Direct link to Same-Origin Access" title="Direct link to Same-Origin Access">​</a></h5>
<p>Similar to the cookie, access to localStorage is governed by the Same-Origin Policy. Data stored in the Local Storage is shared between all tabs and windows from the same origin. There are no attributes that can restrict access to data stored in localStorage.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="browser-access-1">Browser Access<a href="#browser-access-1" class="hash-link" aria-label="Direct link to Browser Access" title="Direct link to Browser Access">​</a></h5>
<ul>
<li>Users can view and clear localStorage data through browser developer tools or settings</li>
<li>Browser extensions with appropriate permissions can read/modify localStorage content</li>
<li>The browser will control access to localStorage by an application using the same-origin policy, so data is accessible only for scripts from the same domain that created it.</li>
<li>Unlike cookies, localStorage data persists indefinitely until explicitly cleared by the user or application.</li>
<li>The browser enforces a storage limit (usually around 5-10 MB) for localStorage per domain.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="server-side-access-1">Server-Side Access<a href="#server-side-access-1" class="hash-link" aria-label="Direct link to Server-Side Access" title="Direct link to Server-Side Access">​</a></h5>
<ul>
<li>The web server and backend services cannot directly access localStorage data since it remains client-side only.</li>
<li>localStorage data is not automatically sent with HTTP requests like cookies are.</li>
<li>You need to share data in localStorage with the server: You need to consciously read it using JavaScript and send it using AJAX/fetch requests or form submissions.</li>
<li>Load balancers and proxies never see localStorage data because it remains within the browser.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="session-storage"><strong>Session Storage</strong><a href="#session-storage" class="hash-link" aria-label="Direct link to session-storage" title="Direct link to session-storage">​</a></h5>
<p><code>sessionStorage</code> is similar to <code>localStorage</code>, but stores data only needed for the current session. The data is cleared when the user navigates away from the page, or the browser is closed.</p>
<table><thead><tr><th><strong>Attribute</strong></th><th><strong>Details</strong></th></tr></thead><tbody><tr><td><strong>Use Case</strong></td><td>Temporary data storage during a single page session, form data backup, per-tab state management, temporary user preferences</td></tr><tr><td><strong>Expiration</strong></td><td>Data persists only for the duration of the page session. Cleared when tab/window is closed</td></tr><tr><td><strong>Data Capacity</strong></td><td>~5-10 MB (varies by browser). Similar to localStorage</td></tr><tr><td><strong>Constraints</strong></td><td>- JavaScript access only (no server access)- Same-origin policy applies- Limited to single browser tab/window which created the session storage- Synchronous operations</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="who-can-access-localstorage-associated-with-a-domain">Who can access localStorage associated with a domain?<a href="#who-can-access-localstorage-associated-with-a-domain" class="hash-link" aria-label="Direct link to Who can access localStorage associated with a domain?" title="Direct link to Who can access localStorage associated with a domain?">​</a></h5>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="same-origin-access-2">Same-Origin Access<a href="#same-origin-access-2" class="hash-link" aria-label="Direct link to Same-Origin Access" title="Direct link to Same-Origin Access">​</a></h6>
<p>Similar to localStorage, access to localStorage is governed by the Same-Origin Policy. Unlike localStorage, data stored in sessionStorage is not shared between all tabs and windows from the same origin. It is only accessible within the same tab/window that created it. Each tab/window gets its own separate sessionStorage instance, even from the same origin.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="browser-access-2">Browser Access<a href="#browser-access-2" class="hash-link" aria-label="Direct link to Browser Access" title="Direct link to Browser Access">​</a></h6>
<p>In terms of Browser Access, access to sessionStorage is similar to that of localStorage except for two distinct differences,</p>
<ul>
<li>Unlike localStorage, sessionStorage data is cleared automatically when the tab/window is closed.</li>
<li>Each browser tab maintains its own separate sessionStorage instance, even for the same domain.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="server-side-access-2">Server-Side Access<a href="#server-side-access-2" class="hash-link" aria-label="Direct link to Server-Side Access" title="Direct link to Server-Side Access">​</a></h6>
<p>Server-Side Access of sessionStorage is similar to that of the localStorage.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="security-considerations-1">Security Considerations<a href="#security-considerations-1" class="hash-link" aria-label="Direct link to Security Considerations" title="Direct link to Security Considerations">​</a></h4>
<ul>
<li>Same Origin Policy applies for Local Storage and Session Storage. Access to data is protected using the same origin policy, where data stored is scoped to the document’s origin, meaning the webpage can only access data if it has the same origin by default.</li>
<li>Local Storage and Session Storage is accessible to Javascript running on the pages with the same origin. Any XSS vulnerabilities present in the site, poses significant risk. There is also no equivalent attribute like <code>HTTPOnly</code> which can be used. Thus storing any critical data is not recommended.</li>
<li>All data in Local Storage and Session Storage is not encrypted by default and stored in plain text. Encrypting client side storage is a difficult problem to solve and not straight forward.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-difference-between-cookies--localsession-storage-in-terms-of-security">Key Difference between Cookies &amp; local/session Storage in terms of Security<a href="#key-difference-between-cookies--localsession-storage-in-terms-of-security" class="hash-link" aria-label="Direct link to Key Difference between Cookies &amp; local/session Storage in terms of Security" title="Direct link to Key Difference between Cookies &amp; local/session Storage in terms of Security">​</a></h3>
<ul>
<li>Cookies are sent with every request but local/session Storage  which decreases the attack surface.</li>
<li>Javascript running on pages within the same origin can access data stored in local/session Storage, while we can deny access to cookies by using attributes like <code>HTTPOnly</code>.</li>
<li>There are no built-in attributes for security configuration for local/session Storage but access to cookies can be configured using built-in attributes.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h3>
<ul>
<li>The difference between localStorage and cookies is mostly about what is being stored and intended use cases,<!-- -->
<ul>
<li>Cookies are better for session management and authentication, Security-sensitive information (when properly configured), and data that needs to be sent to the server in each request for Server-side processing.</li>
<li>localStorage is better for client-side data, UI preferences, Cached data, and Non-sensitive information.</li>
</ul>
</li>
</ul>
<p>Cookies should be used for session management and authentication because of their flexible security controls. It is also vital to have proper restrictions in place for access to cookies with available security attributes instead of relying on localStorage, which doesn&#x27;t support these built-in protections.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">seku&#x27;s blog : Insights from an AppSec Engineer</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#access-to-client-side-storage" class="table-of-contents__link toc-highlight">Access to Client-Side Storage</a></li><li><a href="#client-side-storage" class="table-of-contents__link toc-highlight">Client-Side Storage</a><ul><li><a href="#cookies" class="table-of-contents__link toc-highlight">Cookies</a></li><li><a href="#web-storage-api" class="table-of-contents__link toc-highlight">Web Storage API</a></li><li><a href="#key-difference-between-cookies--localsession-storage-in-terms-of-security" class="table-of-contents__link toc-highlight">Key Difference between Cookies &amp; local/session Storage in terms of Security</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 sayx1</div></div></div></footer></div>
</body>
</html>
